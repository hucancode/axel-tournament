# cert-manager ClusterIssuers for automatic TLS certificate management
# These use Let's Encrypt to automatically provision and renew SSL certificates
#
# PREREQUISITES:
# 1. Install cert-manager first:
#    kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.16.2/cert-manager.yaml
#
# 2. Wait for cert-manager to be ready:
#    kubectl wait --for=condition=Available --timeout=300s deployment/cert-manager -n cert-manager
#
# 3. Set your email and apply this file:
#    export LETSENCRYPT_EMAIL="your-email@example.com"
#    envsubst < cert-manager.yaml | kubectl apply -f -

---
# Let's Encrypt Production Issuer
# This will provision real, trusted SSL certificates
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-prod
spec:
  acme:
    server: https://acme-v02.api.letsencrypt.org/directory
    email: admin@example.com
    privateKeySecretRef:
      name: letsencrypt-prod
    solvers:
      - http01:
          ingress:
            class: nginx

---
# Let's Encrypt Staging Issuer
# Use this for testing to avoid production rate limits
# Certificates will show as untrusted but prove the ACME process works
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-staging
spec:
  acme:
    server: https://acme-staging-v02.api.letsencrypt.org/directory
    email: admin@example.com
    privateKeySecretRef:
      name: letsencrypt-staging
    solvers:
      - http01:
          ingress:
            class: nginx
